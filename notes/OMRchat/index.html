<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="![Example Image](/content/notes/images/hey raphaelo.png) Mit mit dieser einfachen Frage, begannen 5 intensive Tage. 5 Tage an denen ich viel √ºber Prompt Engineering und AI Chatbots lernte."><meta property="og:title" content="OMRchat in 5 Tagen"><meta property="og:description" content="![Example Image](/content/notes/images/hey raphaelo.png) Mit mit dieser einfachen Frage, begannen 5 intensive Tage. 5 Tage an denen ich viel √ºber Prompt Engineering und AI Chatbots lernte."><meta property="og:type" content="website"><meta property="og:image" content="https://raphael-kagermeier.github.io/blog/icon.png"><meta property="og:url" content="https://raphael-kagermeier.github.io/blog/notes/OMRchat/"><meta property="og:width" content="200"><meta property="og:height" content="200"><meta name=twitter:card content="summary"><meta name=twitter:title content="OMRchat in 5 Tagen"><meta name=twitter:description content="![Example Image](/content/notes/images/hey raphaelo.png) Mit mit dieser einfachen Frage, begannen 5 intensive Tage. 5 Tage an denen ich viel √ºber Prompt Engineering und AI Chatbots lernte."><meta name=twitter:image content="https://raphael-kagermeier.github.io/blog/icon.png"><title>OMRchat in 5 Tagen</title><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" type=image/png href=https://raphael-kagermeier.github.io/blog//icon.png><link href=https://raphael-kagermeier.github.io/blog/styles.f5689cbb69bec8a43ae90dcb7f0be118.min.css rel=stylesheet><link href=https://raphael-kagermeier.github.io/blog/styles/_light_syntax.86a48a52faebeaaf42158b72922b1c90.min.css rel=stylesheet id=theme-link><script src=https://raphael-kagermeier.github.io/blog/js/darkmode.0c3686ec2ade2ad6c8f789f7d473f725.min.js></script>
<script src=https://raphael-kagermeier.github.io/blog/js/util.00639692264b21bc3ee219733d38a8be.min.js></script>
<link rel=preload href=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.css as=style onload='this.onload=null,this.rel="stylesheet"' integrity=sha384-R4558gYOUz8mP9YWpZJjofhk+zx0AS11p36HnD2ZKj/6JR5z27gSSULCNHIRReVs crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/katex.min.js integrity=sha384-z1fJDqw8ZApjGO3/unPWUPsIymfsJmyrDVWC8Tv/a1HeOtGmkwNd/7xUS0Xcnvsx crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.15.1/dist/contrib/auto-render.min.js integrity=sha384-+XBljXPPiv+OzfbB3cVmLHf4hdUFHlWNZN5spNQ7rmHTXpd7WvJum6fIACpNNfIR crossorigin=anonymous></script>
<script defer src=https://cdn.jsdelivr.net/npm/katex@0.16.2/dist/contrib/copy-tex.min.js integrity=sha384-ww/583aHhxWkz5DEVn6OKtNiIaLi2iBRNZXfJRiY1Ai7tnJ9UXpEsyvOITVpTl4A crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/core@1.2.1></script>
<script src=https://cdn.jsdelivr.net/npm/@floating-ui/dom@1.2.1></script>
<script defer src=https://raphael-kagermeier.github.io/blog/js/popover.aa9bc99c7c38d3ae9538f218f1416adb.min.js></script>
<script defer src=https://raphael-kagermeier.github.io/blog/js/code-title.ce4a43f09239a9efb48fee342e8ef2df.min.js></script>
<script defer src=https://raphael-kagermeier.github.io/blog/js/clipboard.2913da76d3cb21c5deaa4bae7da38c9f.min.js></script>
<script defer src=https://raphael-kagermeier.github.io/blog/js/callouts.7723cac461d613d118ee8bb8216b9838.min.js></script>
<script>const SEARCH_ENABLED=!1,LATEX_ENABLED=!0,PRODUCTION=!0,BASE_URL="https://raphael-kagermeier.github.io/blog/",fetchData=Promise.all([fetch("https://raphael-kagermeier.github.io/blog/indices/linkIndex.c3299989baebc5899dc67a5926f4cdb1.min.json").then(e=>e.json()).then(e=>({index:e.index,links:e.links})),fetch("https://raphael-kagermeier.github.io/blog/indices/contentIndex.597e552a7c034a430970f98cd4a4ae52.min.json").then(e=>e.json())]).then(([{index:e,links:t},n])=>({index:e,links:t,content:n})),render=()=>{const e=new URL(BASE_URL),t=e.pathname,n=window.location.pathname,i=t==n;addCopyButtons(),addTitleToCodeBlocks(),addCollapsibleCallouts(),initPopover("https://raphael-kagermeier.github.io/blog",!0);function s(n){const e=n.target,t=e.className.split(" "),s=t.includes("broken"),o=t.includes("internal-link");plausible("Link Click",{props:{href:e.href,broken:s,internal:o,graph:!1}})}const o=document.querySelectorAll("a");for(link of o)link.className.includes("root-title")&&link.addEventListener("click",s,{once:!0})},init=(e=document)=>{addCopyButtons(),addTitleToCodeBlocks(),renderMathInElement(e.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}],macros:{'‚Äô':"'"},throwOnError:!1})}</script><script type=module>
    import { attachSPARouting } from "https:\/\/raphael-kagermeier.github.io\/blog\/js\/router.d6fe6bd821db9ea97f9aeefae814d8e7.min.js"
    attachSPARouting(init, render)
  </script><script defer data-domain=raphael-kagermeier.github.io/blog src=https://plausible.io/js/script.js></script>
<script>window.plausible=window.plausible||function(){(window.plausible.q=window.plausible.q||[]).push(arguments)}</script></head><body><div id=search-container><div id=search-space><input autocomplete=off id=search-bar name=search type=text aria-label=Search placeholder="Search for something..."><div id=results-container></div></div></div><script src=https://cdn.jsdelivr.net/npm/flexsearch@0.7.21/dist/flexsearch.bundle.js integrity="sha256-i3A0NZGkhsKjVMzFxv3ksk0DZh3aXqu0l49Bbh0MdjE=" crossorigin=anonymous defer></script>
<script defer src=https://raphael-kagermeier.github.io/blog/js/full-text-search.e6e2e0c213187ca0c703d6e2c7a77fcd.min.js></script><div class=singlePage><header><h1 id=page-title><a class=root-title href=https://raphael-kagermeier.github.io/blog/>ü™¥</a>
<span class=logo__cursor></span></h1><div class=spacer></div><div class=darkmode><input class=toggle id=darkmode-toggle type=checkbox tabindex=-1>
<label id=toggle-label-light for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="dayIcon" viewBox="0 0 35 35" style="enable-background:new 0 0 35 35"><title>Light Mode</title><path d="M6 17.5C6 16.672 5.328 16 4.5 16h-3C.672 16 0 16.672.0 17.5S.672 19 1.5 19h3C5.328 19 6 18.328 6 17.5zM7.5 26c-.414.0-.789.168-1.061.439l-2 2C4.168 28.711 4 29.086 4 29.5 4 30.328 4.671 31 5.5 31c.414.0.789-.168 1.06-.44l2-2C8.832 28.289 9 27.914 9 27.5 9 26.672 8.329 26 7.5 26zm10-20C18.329 6 19 5.328 19 4.5v-3C19 .672 18.329.0 17.5.0S16 .672 16 1.5v3C16 5.328 16.671 6 17.5 6zm10 3c.414.0.789-.168 1.06-.439l2-2C30.832 6.289 31 5.914 31 5.5 31 4.672 30.329 4 29.5 4c-.414.0-.789.168-1.061.44l-2 2C26.168 6.711 26 7.086 26 7.5 26 8.328 26.671 9 27.5 9zM6.439 8.561C6.711 8.832 7.086 9 7.5 9 8.328 9 9 8.328 9 7.5c0-.414-.168-.789-.439-1.061l-2-2C6.289 4.168 5.914 4 5.5 4 4.672 4 4 4.672 4 5.5c0 .414.168.789.439 1.06l2 2.001zM33.5 16h-3c-.828.0-1.5.672-1.5 1.5s.672 1.5 1.5 1.5h3c.828.0 1.5-.672 1.5-1.5S34.328 16 33.5 16zM28.561 26.439C28.289 26.168 27.914 26 27.5 26c-.828.0-1.5.672-1.5 1.5.0.414.168.789.439 1.06l2 2C28.711 30.832 29.086 31 29.5 31c.828.0 1.5-.672 1.5-1.5.0-.414-.168-.789-.439-1.061l-2-2zM17.5 29c-.829.0-1.5.672-1.5 1.5v3c0 .828.671 1.5 1.5 1.5s1.5-.672 1.5-1.5v-3C19 29.672 18.329 29 17.5 29zm0-22C11.71 7 7 11.71 7 17.5S11.71 28 17.5 28 28 23.29 28 17.5 23.29 7 17.5 7zm0 18c-4.136.0-7.5-3.364-7.5-7.5s3.364-7.5 7.5-7.5 7.5 3.364 7.5 7.5S21.636 25 17.5 25z"/></svg></label><label id=toggle-label-dark for=darkmode-toggle tabindex=-1><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" id="nightIcon" viewBox="0 0 100 100" style="enable-background='new 0 0 100 100'"><title>Dark Mode</title><path d="M96.76 66.458c-.853-.852-2.15-1.064-3.23-.534-6.063 2.991-12.858 4.571-19.655 4.571C62.022 70.495 50.88 65.88 42.5 57.5 29.043 44.043 25.658 23.536 34.076 6.47c.532-1.08.318-2.379-.534-3.23-.851-.852-2.15-1.064-3.23-.534-4.918 2.427-9.375 5.619-13.246 9.491-9.447 9.447-14.65 22.008-14.65 35.369.0 13.36 5.203 25.921 14.65 35.368s22.008 14.65 35.368 14.65c13.361.0 25.921-5.203 35.369-14.65 3.872-3.871 7.064-8.328 9.491-13.246C97.826 68.608 97.611 67.309 96.76 66.458z"/></svg></label></div></header><article><h1>OMRchat in 5 Tagen</h1><p class=meta></p><ul class=tags></ul><aside class=mainTOC><details><summary>Table of Contents</summary><nav id=TableOfContents><ol><li><a href=#das-grundger√ºst>Das Grundger√ºst</a></li><li><a href=#daten-und-indexierung>Daten und Indexierung</a></li><li><a href=#vektor-datenbank>Vektor-Datenbank</a></li><li><a href=#die-suchanfrage>Die Suchanfrage</a></li><li><a href=#die-hochzeit>Die Hochzeit</a></li><li><a href=#bonus-prompt-engineering>Bonus: Prompt Engineering</a></li><li><a href=#wie-gehts-weiter>Wie gehts weiter</a></li></ol></nav></details></aside><p>![Example Image](/content/notes/images/hey raphaelo.png)
Mit mit dieser einfachen Frage, begannen 5 intensive Tage. 5 Tage an denen ich viel √ºber Prompt Engineering und AI Chatbots lernte.</p><p>Als mir Philipp Gl√∂ckler - einer der Hosts des Doppelg√§nger Tech Talk Podcast - schrieb, hatte nichts als einen simplen und h√§sslichen Prototypen eines Chatbots.
Etwa 38 Stunden sp√§ter stand der OMRChat in seiner Rudiment√§ren form.</p><p>In den n√§chsten 3 Tagen wurden einige Optimierungsma√ünahmen getroffen, die dazu f√ºhrten, dass der Chatbot kommunikativ wurde und Fragen immer besser beantworten konnte. Was ich dabei gelernt habe und wie das System funktioniert erf√§hrst du in diesem Artikel.</p><a href=#das-grundger√ºst><h2 id=das-grundger√ºst><span class=hanchor arialabel=Anchor># </span>Das Grundger√ºst</h2></a><p>Um zu verstehen, wie der Chatbot funktioniert, m√ºssen wir uns zun√§chst das zugrunde liegende System anschauen. Dieses l√§sst sich in drei Bereiche unterteilen:</p><ol><li>Daten und Indexierung</li><li>Datenbank und Ranking</li><li>Die Hochzeit</li></ol><hr><a href=#daten-und-indexierung><h2 id=daten-und-indexierung><span class=hanchor arialabel=Anchor># </span>Daten und Indexierung</h2></a><blockquote class="callout-collapsible callout-collapsed info-callout"><p>Diagramm</p><p><a class="internal-link broken">OMRChat diagram.png</a></p></blockquote><p>Die erste Herausforderung bestand darin, alle relevanten Daten von Webseiten wie omr.com zu extrahieren.
Daf√ºr habe ich einen eigenen OMRCrawler entwickelt, der einen Browser imitiert und versteht, wie der Content richtig abgerufen werden kann ‚Äì sprich: die richtigen Buttons klicken, um Popups anzuzeigen um dann den wichtigen Text zu extrahieren.</p><p>Anschlie√üend wurden die Textinhalte aufbereitet und in einer Vektor-Datenbank gespeichert.</p><hr><a href=#vektor-datenbank><h2 id=vektor-datenbank><span class=hanchor arialabel=Anchor># </span>Vektor-Datenbank</h2></a><p>Vektoren werden verwendet, um m√∂glichst relevante Inhalte aus der Datenbank zu identifizieren ‚Äì ein Ansatz, den auch Google nutzt, um semantische Beziehungen zwischen W√∂rtern zu verstehen und Suchanfragen mit relevanten Inhalten auf Websites abzugleichen.
<a href=https://code.google.com/archive/p/word2vec/ rel=noopener>https://code.google.com/archive/p/word2vec/</a></p><p>Ein Text-Vektor ist eine Liste an Zahlen, die einen bestimmten Text Repr√§sentiert. Anders wie bei Buchstaben und W√∂rtern, k√∂nnen wir mit Zahlen die thematische Relevanz durch die Entfernung der Zahlen zueinander Berechnen. So k√∂nnen wir √ºber eine reine Keyword-Suche hinausgehen und thematisch passende Inhalte aus dem OMR-Kosmos finden.</p><blockquote class="callout-collapsible callout-collapsed faq-callout"><p>Vektor-Embeddings einem Kind erkl√§rt</p><p>Stell dir Vektor Embeddings wie eine Schatzkarte vor, auf der jeder Schatz (Wort) einen bestimmten Platz hat. Jeder Schatz hat seine eigene Position, die durch Zahlen (Koordinaten) beschrieben wird. √Ñhnliche Sch√§tze sind nah beieinander, w√§hrend unterschiedliche Sch√§tze weiter voneinander entfernt sind. Zum Beispiel k√∂nnten die Kategorien f√ºr Tiere [&ldquo;Gr√∂√üe&rdquo;, &ldquo;Geschwindigkeit&rdquo; und &ldquo;Freundlichkeit&rdquo;] sein. Ein Hund h√§tte dann einen Vektor wie [5, 3, 7], weil er mittelgro√ü ist, nicht so schnell wie ein Gepard, aber sehr freundlich.</p></blockquote><p>Wir verwenden hier die OpenAI Embeddings (text-embedding-ada-002), die in 1536 Dimensionen die Bedeutung eines Texts zuordnen K√∂nnen.</p><hr><a href=#die-suchanfrage><h2 id=die-suchanfrage><span class=hanchor arialabel=Anchor># </span>Die Suchanfrage</h2></a><p>Nachdem wir nun unsere Texte und deren Vektoren in einer Datenbank gespeichert haben, geht es darum, sie abzurufen.
Das war einer der gr√∂√üten Pains. Auch wenn die Ergebnisse besser wurden, gab es immer wieder Antworten auf einfachen Fragen die f√ºr einige Nutzer nicht beantwortet wurden.
Um besser zu verstehen, welche Komponenten zu so einem Fehlverhalten f√ºhren, m√ºssen wir diesen Abschnitt genauer verstehen.</p><p>In einem Chat kann es vorkommen, dass sich eine Folgefrage auf den Chatverlauf bezieht. Ein Beispiel:</p><blockquote><p>Frage 1: Wann sind die Doppelg√§nger zu sehen?</p><p>Antwort 1: Die Doppelg√§nger treten am 10/5/2023 von 16:20 bis 17:00 auf.</p></blockquote><hr><blockquote><p>Frage 2: Auf welcher Stage?</p><p>Antwort 2: Der Podcast findet auf der Red Stage statt.</p></blockquote><p>W√ºrden wir immer die letzte Frage f√ºr die Suche nach passenden Inhalten verwenden, w√ºrden wir bei diesem Beispiel keine gute Antwort erhalten.</p><p>Die beste L√∂sung war die AI nach einer guten Datenbank Anfrage zu fragen. Also habe ich den Chatverlauf mit einigen Anweisungen an GPT-4 gesendet und zur√ºck kam ein kurzer Satz, der f√ºr die Datenbank Abfrage genutzt werden kann.
Dieser Satz wird anschlie√üend wie die Texte der Website in einen Vektor verwandelt ‚Äì und voil√†: Wir erhalten thematisch relevante Inhalte aus unserer Datenbank.</p><blockquote class="callout-collapsible callout-collapsed info-callout"><p>Hier ein Beispiel aus einem fiktiven Chatverlauf:</p><p><a class="internal-link broken">Inquiry Template example.png</a></p></blockquote><p><strong>Wer mehr √ºber die Suchanfrage lernen m√∂chte, kann unter <a href=/blog/notes/Inquiry-Template rel=noopener class=internal-link data-src=/blog/notes/Inquiry-Template>Inquiry Template</a> die aktuelle und alte Version ansehen.</strong></p><blockquote class="callout-collapsible callout-collapsed tip-callout"><p>F√ºr Nerds</p><p>Durch die Berechnung mittels Cosine Similarity wurden die 1914 Inhalte gerankt und die Top 3 Ergebnisse zur Beantwortung der Frage herangezogen.</p></blockquote><hr><a href=#die-hochzeit><h2 id=die-hochzeit><span class=hanchor arialabel=Anchor># </span>Die Hochzeit</h2></a><p>Im letzten Schritt senden wir die Textbl√∂cke aus der Datenbank zusammen mit dem Chatverlauf des Nutzers und einer Anweisung an GPT-4. Als Ergebnis erhalten wir eine finale Antwort, die wir dem Nutzer anzeigen k√∂nnen.
<strong>Eine Detailierte Beschreibung des Finalen Prompts findest du unter: <a href=/blog/notes/Final-Prompt rel=noopener class=internal-link data-src=/blog/notes/Final-Prompt>Final Prompt</a></strong></p><a href=#bonus-prompt-engineering><h2 id=bonus-prompt-engineering><span class=hanchor arialabel=Anchor># </span>Bonus: Prompt Engineering</h2></a><p>Jetzt, wo wir Beispiele f√ºr die Arbeit mit Prompts gesehen haben, wollen wir √ºber das Prompt-Engineering sprechen - eine neu entstehende F√§higkeit an sich.</p><p>Prompt-Engineering ist der Prozess, Eingabeabfragen oder Aufgaben sorgf√§ltig zu gestalten, um die genauesten und n√ºtzlichsten Antworten von AIs zu erhalten. Obwohl diese Modelle unglaublich leistungsstark und vielseitig sind, brauchen sie ein wenig Anleitung, um die Arbeit wirklich korrekt zu erledigen.</p><p>Prompt-Engineering besteht aus drei Hauptkomponenten:</p><ol><li><strong>Formulierung</strong>: Wir m√ºssen mit verschiedenen M√∂glichkeiten experimentieren, unsere Eingabeabfragen zu pr√§sentieren. Ziel ist es, die perfekte Balance zwischen Klarheit und Spezifit√§t zu finden, um sicherzustellen, dass die AI genau versteht, wonach wir suchen.</li><li><strong>Kontext</strong>: Wir m√ºssen unseren Aufforderungen Kontext hinzuf√ºgen, um der AI zu helfen, das gr√∂√üere Bild zu &ldquo;verstehen&rdquo;. Dies kann beinhalten, Hintergrundinformationen bereitzustellen oder das Modell sogar sanft in eine bestimmte Denkrichtung zu lenken. Wie wir vorher gesehen haben, tun wir dies, um eine Anfrage zu erstellen, die auf Basis des Chatverlaufs des Benutzers relevant ist.</li><li><strong>Anweisungen</strong>: Wir m√ºssen der AI klare und pr√§zise Anweisungen geben. Wir m√ºssen das gew√ºnschte Format f√ºr die Antwort angeben oder wichtige Punkte hervorheben, die das Modell ber√ºcksichtigen soll. Wie du vorher gesehen hast, haben wir das getan, indem wir eine Liste von Anweisungen definiert haben, die genau zeigen, wie die Anfrage interpretiert werden soll und wie sie mit der vom Benutzer erhaltenen Aufforderung kombiniert werden soll.</li></ol><p>Beim Prompt-Engineering geht es um trial and error, ein Wechselspiel aus Iteration und Optimierung. Indem wir unsere Prompts verfeinern, entwickeln wir ein tieferes Verst√§ndnis daf√ºr, wie wir effektiv mit der AI kommunizieren k√∂nnen und verwandeln sie in ein zuverl√§ssigeres und effizienteres Werkzeug.</p><a href=#wie-gehts-weiter><h2 id=wie-gehts-weiter><span class=hanchor arialabel=Anchor># </span>Wie gehts weiter</h2></a><p>-> Zusammenfassungen
-> Follow for more</p></article><hr><div id=contact_buttons><footer><p>Raphael Kagermeier ¬© 2023</p><ul><li><a href=https://raphael-kagermeier.github.io/blog/>Home</a></li><li><a href=https://twitter.com/Raphael69730456>Twitter</a></li><li><a href=https://www.linkedin.com/in/raphael-kagermeier/>Linkedin</a></li><li><a href=/notes/imprint>Imprint</a></li></ul></footer></div></div></body></html>